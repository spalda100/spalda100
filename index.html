<!DOCTYPE html>
<html>
<head>
    <title>Main Page</title>
    <meta name="referrer" content="no-referrer-when-downgrade">

    <!-- OIR Tracking -->
    <script type='text/javascript'>
    !function(s) {
      let o = s.createElement('script'), u = s.getElementsByTagName('script')[0];
      o.src = 'https://cdn.aggle.net/oir-dev/oir-dev.min.js';
      o.async = !0, o.setAttribute('oirtyp', '6311ae17'), o.setAttribute('oirid', '66541FED');
      u.parentNode.insertBefore(o, u);
    }(document);
    </script>
    <script type='text/javascript'>
    !function(e) {
      let t = {  };
      (e._oirtrk = e._oirtrk || []).push(['track', 'on-site', t]);
    }(window);
    </script>

    <!-- Sendlane Script -->
    <script src="https://sendlane.com/scripts/pusher.js" async data-token="617f71d6-fb42-4ffb-bb8f-3c69adf5f89d"></script>

    <!-- Initialize Sendlane -->
    <script>
    window._Sendlane = window._Sendlane || [];
    </script>

    <!-- Event ID Push (One-time setup) -->
    <script>
    _Sendlane.push({
        event_id: 'LzeVFt4COdDGg'
    });
    </script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16588078378"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'AW-16588078378');
    </script>
</head>
<body>
    <!-- Your body content goes here -->

    <!-- Button to view product -->
    <button onclick="trackAndViewProduct('YOUR_PRODUCT_ID_HERE', 'https://spalda100.github.io/PRODUCT.HTML')">View Product</button>

    <!-- Button to open PRODUCT.HTML page -->
    <button onclick="window.location.href = 'https://spalda100.github.io/PRODUCT.HTML'">Open Product Page</button>

    <!-- Add to Cart Button -->
    <button id="add-to-cart-btn">Add to Cart</button>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Function to wait for Sendlane to be defined
        function waitForSendlane(callback) {
          if (window._Sendlane && Array.isArray(window._Sendlane)) {
            callback();
          } else {
            console.error('Sendlane is not defined yet. Retrying in 500ms...');
            setTimeout(function() {
              waitForSendlane(callback);
            }, 500);
          }
        }

        // Add to Cart button click handler
        const addToCartButton = document.getElementById('add-to-cart-btn');
        if (addToCartButton) {
          addToCartButton.addEventListener('click', function () {
            waitForSendlane(function() {
              // Push the 'added_to_cart' event once Sendlane is ready
              window._Sendlane.push({
                event: 'added_to_cart',
                line_items: [
                  {
                    product_id: 12345, // Replace with dynamic product ID if available
                  }
                ],
              });

              // Debugging logs
              console.log('Add to Cart clicked. Sendlane event triggered.');
              console.log(window._Sendlane);
            });
          });
        } else {
          console.error('Add to Cart button not found.');
        }
      });
    </script>
</body>
</html>
